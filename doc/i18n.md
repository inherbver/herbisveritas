# Internationalisation (i18n)

## Configuration de Base

### Langues Supportées

- **Français (fr)** : Langue par défaut
- **Anglais (en)**
- **Allemand (de)** : À venir
- **Espagnol (es)** : À venir

### Structure des Fichiers

```
src/
├── i18n/
│   ├── config.ts         # Configuration des paramètres i18n
│   ├── navigation.ts     # Utilitaires de navigation
│   └── messages/
│       ├── en/          # Traductions anglaises
│       │   └── Global.json
│       └── fr/          # Traductions françaises
│           └── Global.json
└── messages/
    ├── en.json        # Traductions spécifiques aux pages (en)
    └── fr.json        # Traductions spécifiques aux pages (fr)
```

## Utilisation dans les Composants

### Composants Serveur

```typescript
import { getTranslations } from 'next-intl/server';

export default async function Page({ params: { locale } }) {
  const t = await getTranslations({ locale, namespace: 'Namespace' });
  return <h1>{t('welcome')}</h1>;
}
```

### Composants Client

```typescript
'use client';
import { useTranslations } from 'next-intl';

export function ClientComponent() {
  const t = useTranslations('Namespace');
  return <button>{t('submit')}</button>;
}
```

## Bonnes Pratiques

### Organisation des Clés de Traduction

- Utiliser des namespaces logiques (ex: `Auth`, `Cart`, `Product`)
- Clés en `camelCase`
- Regrouper par fonctionnalité

### Gestion des Pluriels

```json
{
  "cart": {
    "itemsCount": "{count, plural, =0 {Aucun article} one {1 article} other {# articles}}"
  }
}
```

### Formatage des Dates et Nombres

```typescript
import { useLocale, useNow, useTimeZone } from 'next-intl';

function DateExample() {
  const locale = useLocale();
  const timeZone = useTimeZone();
  const now = useNow();

  return (
    <div>
      {new Intl.DateTimeFormat(locale, {
        timeZone,
        dateStyle: 'full'
      }).format(now)}
    </div>
  );
}
```

## Dépannage

### Problèmes Courants

#### 1. La langue ne change pas

- Vérifier que le `locale` est correctement passé à `getTranslations`
- S'assurer que le middleware est correctement configuré

#### 2. Clés manquantes

- Vérifier l'orthographe des clés
- S'assurer que le namespace est correct
- Vérifier que la traduction existe dans le fichier correspondant

#### 3. Erreurs de typage

- Utiliser les types générés par `next-intl`
- Vérifier la structure des fichiers de traduction

## Configuration Avancée

### Middleware

Le fichier `middleware.ts` gère la détection de la langue et la redirection.

### Génération des Types

Pour une meilleure expérience TypeScript, générez les types des traductions :

```bash
npx @formatjs/cli extract 'src/**/*.{ts,tsx}' --out-file lang/en.json
npx @formatjs/cli extract 'src/**/*.{ts,tsx}' --out-file lang/fr.json
```

### Performances

- Chargement paresseux des traductions
- Regroupement par route
- Préchargement des langues fréquemment utilisées
